# タスクファイル テンプレートとサンプル

このドキュメントは、各モードで使用するタスクファイルのテンプレートとサンプルを提供します。
各モードで作業を開始する前に、このドキュメントを参照してください。

## 1. テンプレート

### 1.1 メインタスクファイル

```markdown
# メインタスク: [タイトル]

## 概要
- タスクの背景と目的
- 期待される成果物
- 影響範囲の概要

## タスク構成
1. サブタスクの分割方針
   - 分割の基準
   - 各サブタスクの役割

2. 依存関係
   - サブタスク間の依存関係図
   ```mermaid
   graph TB
     A[サブタスク1] --> B[サブタスク2]
     B --> C[サブタスク3]
   ```
   - 依存関係の理由

## 完了条件
- [ ] すべてのサブタスクが完了
- [ ] 成果物の要件を満たしている
- [ ] テストが成功している
- [ ] ドキュメントが更新されている

## 進捗管理
- 現在のステータス: Planning
- 完了したサブタスク: 0/3
- 残存する課題:
  - なし
```

### 1.2 Codeモード向けサブタスクファイル

```markdown
# 実装サブタスク: [タイトル]

## 目的
- 実装する機能や修正の目的を具体的に記載
- 実現したい状態を明確に説明

## 前提条件
- 依存するサブタスク: [依存タスクID]
- 必要な環境や設定
- 参照すべき実装やドキュメント

## 修正範囲
- 対象ファイル（フルパスで記載）
- 影響が予想される範囲
- 関連する他の実装

## 実装内容
1. 具体的な実装手順をステップバイステップで記載
2. 特に注意が必要な点を明記
3. 既存コードへの影響を考慮した手順を示す

## 確認項目
- [ ] 単体テストの追加/更新
- [ ] 結合テストの確認
- [ ] 依存タスクとの整合性確認
- [ ] その他の確認項目（具体的に記載）

## 完了報告
- 変更したファイル:
- テスト結果:
- 残課題:
```

### 1.3 Docsモード向けサブタスクファイル

```markdown
# ドキュメント更新サブタスク: [タイトル]

## 目的
- ドキュメント更新の目的を具体的に記載
- 読者にとっての価値を明確に説明

## 前提条件
- 依存するサブタスク: [依存タスクID]
- 参照すべきドキュメント
- 必要な実装の理解

## 対象ドキュメント
- 更新するドキュメントのパス（フルパスで記載）
- 関連する他のドキュメント

## 更新内容
1. 具体的な更新内容をステップバイステップで記載
2. 追加・変更・削除する内容を明確に示す
3. 既存ドキュメントとの整合性を考慮した手順を示す

## 確認項目
- [ ] スペルチェック
- [ ] リンクの有効性確認
- [ ] 実装との整合性確認
- [ ] 依存タスクとの整合性確認

## 完了報告
- 更新したファイル:
- レビュー結果:
- 残課題:
```

## 2. サンプル

### 2.1 設定ファイルのバリデーション機能追加の例

#### メインタスク（main.md）
```markdown
# メインタスク: 設定ファイルバリデーション機能の実装

## 概要
設定ファイルの読み込み時にバリデーションを実施し、不正な設定を早期に検出する機能を追加します。
これにより、設定エラーの早期発見と明確なエラーメッセージの提供を実現します。

## タスク構成
1. サブタスクの分割
   - 001: バリデーション機能の実装 (Code)
   - 002: テストケースの追加 (Code)
   - 003: バリデーション仕様のドキュメント作成 (Docs)

2. 依存関係
   ```mermaid
   graph TB
     A[001:バリデーション実装] --> B[002:テスト追加]
     A --> C[003:仕様ドキュメント]
   ```

## 完了条件
- [ ] バリデーション機能が実装されている
- [ ] すべてのテストが成功している
- [ ] ドキュメントが更新され、実装と整合している

## 進捗管理
- 現在のステータス: Planning
- 完了したサブタスク: 0/3
```

#### Codeモード向けサブタスク（code/001.md）
```markdown
# 実装サブタスク: バリデーション機能の実装

## 目的
- 設定ファイルの読み込み時にバリデーションを実施し、不正な設定を早期に検出する
- ユーザーに明確なエラーメッセージを提供する

## 前提条件
- 依存するサブタスク: なし
- ConfigLoaderの実装を理解していること

## 修正範囲
- src/main/java/com/example/config/ConfigLoader.java
- 設定読み込み時の処理全般に影響の可能性あり

## 実装内容
1. ConfigLoaderクラスにvalidateConfig()メソッドを追加
   - 必須項目のチェック
   - 値の範囲チェック
   - フォーマットチェック

2. 設定読み込み時にバリデーションを実行するよう修正
   - load()メソッド内でvalidateConfig()を呼び出し
   - バリデーションエラー時は例外をスロー

## 確認項目
- [ ] メソッドの実装
- [ ] エラーメッセージの定義
- [ ] 例外処理の実装

## 完了報告
- 変更したファイル: ConfigLoader.java
- テスト結果: 保留
- 残課題: テストケースの作成（サブタスク002で対応）
```

#### Docsモード向けサブタスク（docs/003.md）
```markdown
# ドキュメント更新サブタスク: バリデーション仕様の文書化

## 目的
- 設定ファイルのバリデーション仕様を開発者向けドキュメントに追加
- エラー発生時の対処方法を明確に説明

## 前提条件
- 依存するサブタスク: 001（バリデーション機能の実装）
- 実装されたバリデーションロジックの理解

## 対象ドキュメント
- docs/settings/validation.md
- docs/settings/error-handling.md（新規作成）

## 更新内容
1. バリデーションルールの追加
   - 必須項目の一覧
   - 各設定項目の制約条件
   - エラーメッセージ一覧

2. エラーハンドリングの説明追加
   - 発生する例外の種類
   - エラー発生時の動作
   - トラブルシューティングガイド

## 確認項目
- [ ] 実装と説明の整合性確認
- [ ] エラーメッセージの正確性確認
- [ ] サンプルコードの動作確認

## 完了報告
- 更新したファイル:
  - docs/settings/validation.md
  - docs/settings/error-handling.md
- レビュー結果: 保留
- 残課題: なし