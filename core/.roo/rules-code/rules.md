# Coreプロジェクト Codeモード開発ルール

このドキュメントは、`core`プロジェクトにおけるCodeモード固有の開発ルールを定義します。
`../rules`フォルダの共通ルールも合わせて参照してください。

## 1. 実装修正時の注意点

1. 修正を検討しているファイルは、ファイルシステム上の実際のファイルの内容を確認してから修正方法を考える
2. 修正内容に応じて関連する仕様ドキュメント(`docs/01-index.md`参照)を確認すること
3. `application`パッケージ以下の実装を修正した際は、仕様ドキュメントの更新要否を確認すること
4. 仕様と実装の整合性を維持すること

## 2. 開発規約

### 2.1. コード品質
- 実装コードを省略せず、完全な形で提供すること
- セキュリティのベストプラクティスに従った実装を行うこと
- メソッドの責務を明確に保つこと
- 適切なエラーハンドリングを実装すること

### 2.2. 機密情報の取り扱い
- APIキー、トークン、認証情報を含むファイルの読み取りと変更を禁止
- 機密ファイルを絶対にコミットしない
- シークレット情報は環境変数を使用する
- ログ出力に認証情報を含めない

### 2.3. 命名規則
- クラス名: PascalCase
- メソッド名: camelCase
- 変数名: camelCase
- 定数名: UPPER_SNAKE_CASE
- パッケージ名: lowercase

### 2.4. 依存関係管理
- Mavenを使用する
- 依存関係は最小限に保つ
- バージョンは依存関係の追加時点の最新のものを使用する

## 3. テスト

### 3.1. テスト要件
- JUnit 5を使用する
- 統合テストを重視する
- テストカバレッジは80%以上を維持する
- すべてのパブリックメソッドにテストを作成する

### 3.2. テスト完了の定義
- すべてのテストがパスすること
- コードカバレッジが要件を満たすこと
- テストコードがレビュー済みであること
- テストケースが仕様を網羅していること

## 4. タスクファイルの取り扱い

### 4.1. タスク開始時
- `.roo/work/tasks/TASK-{番号}/code-{番号}.md`を確認
- タスクの目的と実装内容を理解
- 確認項目を把握
- タスクのフォーマットについては`../rules/task-templates.md`の1.1セクションを参照

### 4.2. タスク完了の確認基準
1. 実装の完了
   - 仕様通りの機能が実装されている
   - すべてのテストがパスしている
   - コードスタイルが統一されている

2. レビュー項目の確認
   - セキュリティ上の問題がない
   - パフォーマンスが考慮されている
   - エラーハンドリングが適切

3. テスト確認
   - 単体テストが作成されている
   - 統合テストが作成されている
   - エッジケースが考慮されている

### 4.3. タスク完了時
- すべての確認項目をチェック
- 実装内容とタスクの要件を照合
- タスクファイルを`.roo/work/tasks-done/TASK-{番号}/`に移動
