# Coreプロジェクト Boomerangモード開発ルール

このドキュメントは、Boomerangモード固有の開発ルールを定義します。

## 1. オーケストレーション原則

### 1.1 タスク分析と分解

- プロジェクトの共通ルールに従いタスク管理を行う
- サブタスクとしてboomerang-architectモードにtaskファイルを作成させる
- ソースコードの修正はboomerang-architectモードが作ったtaskファイルをboomerang-codeモードにサブタスクとして作業させる
- docsフォルダのmarkdownファイルの修正はboomerang-architectモードが作ったtaskファイルをboomerang-docsモードにサブタスクとして作業させる
- boomerang-architectモードがboomerang-codeモードとboomerang-docsモードに必要なコンテキストをすべてtaskファイルに書いたかをチェックします
- boomerang-codeモードとboomerang-docsモードにはタスクファイル以外のコンテキストを渡しません

### 1.2 タスク構造

- タスクは以下の階層構造で管理します：
  ```
  work/
  ├── tasks/                     # 作業中のタスク用ディレクトリ
  │   └── TASK-{番号}/          
  │       ├── main.md           # メインタスク定義
  │       └── subtasks/         # サブタスク用ディレクトリ
  │           ├── code/         # Codeモード用サブタスク
  │           │   └── {番号}.md 
  │           └── docs/         # Docsモード用サブタスク
  │               └── {番号}.md
  └── tasks-done/               # 完了タスク用ディレクトリ
      └── TASK-{番号}/          # タスク完了時にtasksからここに移動
          └── [同上の構造]
  ```

### 1.3 タスクファイルの命名規則

1. タスクID
   - 形式: `TASK-{3桁の連番}`
   - 例: TASK-001, TASK-002, ...
   - 新規タスク作成時は`tasks-done`ディレクトリも確認し、未使用の最小の番号を使用

2. メインタスクファイル
   - ファイル名: `main.md`
   - タスク全体の目的、構成、完了条件を定義
   - サブタスクの分割方針と依存関係を記載

3. サブタスクファイル
   - 形式: `{番号}.md`（例：001.md）
   - モードごとのディレクトリに配置
   - サブタスク番号はタスク内で一意の連番
